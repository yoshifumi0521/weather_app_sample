<!DOCTYPE html>
<html lang="ja">
<head>
    <title>天気予報APIのサンプル</title>
    <meta charset="UTF-8" />
    <!-- jQueryを、Google Libraries APIで読み取る。最新版の1.8.3を読み取る。 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

</head>
<body>

<h1>天気予報APIのサンプル</h1>

<strong>郵便番号</strong>は、<span id="postcode"></span><br>

<strong>位置情報</strong>は、<span id="location"></span><br>





</body>

<script>
    $(function(){

        //パラメーターで郵便番号を受け取る。
        var params = getUrlVars();
        var postcode = params["postcode"];
        $("#postcode").html(postcode);

        //YahooAPIで、郵便番号を使って、位置情報を取得
        var yahool_app_id = "dj0zaiZpPTBWWDNjMVpIM0xUUiZzPWNvbnN1bWVyc2VjcmV0Jng9MTI-";
        var location;
        $.getJSON(
            // APIのURL
            'http://search.olp.yahooapis.jp/OpenLocalPlatform/V1/zipCodeSearch?appid='+yahool_app_id+'&query='+postcode+'&output=json&callback=?',
            function(data){
                location = data["Feature"][0]["Geometry"]["Coordinates"];
                $("#location").html(location);
            }
        );

        //













    });

    //urlのパラメーターを取得するメソッド
    function getUrlVars()
    {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    }










</script>




